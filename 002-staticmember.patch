From b3ebf1e39c94fed4b4a1f0f2a00a72be7ccbe773 Mon Sep 17 00:00:00 2001
From: Travis Reitter <travis.reitter@collabora.co.uk>
Date: Wed, 15 Aug 2012 00:37:39 +0000
Subject: Access static class members through class; use explicit .begin()

This covers the libsocialweb backend tests.

Helps: https://bugzilla.gnome.org/show_bug.cgi?id=681420
---
diff --git a/tests/lib/libsocialweb/backend.vala b/tests/lib/libsocialweb/backend.vala
index da1c805..0425278 100644
--- a/tests/lib/libsocialweb/backend.vala
+++ b/tests/lib/libsocialweb/backend.vala
@@ -225,7 +225,7 @@ public class LibsocialwebTest.LibsocialwebServiceTest : Object,
               (query, p, path);
           conn.register_object (path, contact_view);
           contact_views[path] = contact_view;
-          this.view_count++;
+          LibsocialwebTest.LibsocialwebServiceTest.view_count++;
         }
       catch (GLib.IOError e)
         {
diff --git a/tests/libsocialweb/aggregation.vala b/tests/libsocialweb/aggregation.vala
index f06fb22..37d966a 100644
--- a/tests/libsocialweb/aggregation.vala
+++ b/tests/libsocialweb/aggregation.vala
@@ -48,7 +48,7 @@ public class AggregationTests : Folks.TestCase
       /* Initialize an empty key file for the relationships*/
       var kf_relationships_path = Path.build_filename (
           Environment.get_tmp_dir (),
-          this.KF_RELATIONSHIPS_FILE_PATH, null);
+          AggregationTests.KF_RELATIONSHIPS_FILE_PATH, null);
       Environment.set_variable ("FOLKS_BACKEND_KEY_FILE_PATH",
           kf_relationships_path, true);
       string kf_relationships_data = "#\n";
@@ -66,7 +66,7 @@ public class AggregationTests : Folks.TestCase
 
       /* Use a temporary key file for the BackendStore */
       var kf_path = Path.build_filename (Environment.get_tmp_dir (),
-          this.STORE_FILE_PATH, null);
+          AggregationTests.STORE_FILE_PATH, null);
 
       FileUtils.remove (kf_path);
 
@@ -195,7 +195,7 @@ public class AggregationTests : Folks.TestCase
           if (individual_gathered.length >= 2)
             main_loop.quit ();
         });
-      aggregator.prepare ();
+      aggregator.prepare.begin ();
 
       timer_id = Timeout.add_seconds (5, () =>
         {
@@ -268,7 +268,7 @@ public class AggregationTests : Folks.TestCase
 
       Idle.add (() =>
         {
-          aggregator.link_personas (personas);
+          aggregator.link_personas.begin (personas);
           return false;
         });
 
diff --git a/tests/libsocialweb/dummy-lsw.vala b/tests/libsocialweb/dummy-lsw.vala
index d2a9241..1f9505c 100644
--- a/tests/libsocialweb/dummy-lsw.vala
+++ b/tests/libsocialweb/dummy-lsw.vala
@@ -74,7 +74,7 @@ public class DummyLswTests : Folks.TestCase
             {
               LibsocialwebTest.ContactView view
                   = (LibsocialwebTest.ContactView)v;
-              view.Start();
+              view.Start.begin ();
               mysocialnetwork.contact_views[view_path].ContactsAdded
                   (new LibsocialwebTest.LibsocialwebContactViewTest
                       .ContactsAddedElement[0]);
@@ -163,7 +163,7 @@ public class DummyLswTests : Folks.TestCase
 
           main_loop.quit ();
         });
-      aggregator.prepare ();
+      aggregator.prepare.begin ();
 
       timer_id = Timeout.add_seconds (5, () =>
         {
--
cgit v0.9.0.2
